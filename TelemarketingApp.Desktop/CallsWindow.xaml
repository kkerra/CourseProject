<Window x:Class="TelemarketingApp.Desktop.CallsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TelemarketingApp.Desktop"
        mc:Ignorable="d"
        Title="CallWindow" Height="450" Width="800" Loaded="CallsWindow_Loaded">
    <Grid Background="#F5F5F5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#2C3E50" Padding="10">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">

                <Button x:Name="CreateCallButton" 
                        Content="➕ Создать заявку" 
                        Background="#3498DB"
                        Foreground="White"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Height="35"
                        Padding="15,0"
                        Margin="0,0,10,0"
                        BorderBrush="Transparent"
                        BorderThickness="0"
                        Cursor="Hand"
                        Click="CreateCallButton_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border CornerRadius="5" 
                                    Background="{TemplateBinding Background}">
                                <ContentPresenter HorizontalAlignment="Center" 
                                                  VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                    <Button.Triggers>
                        <EventTrigger RoutedEvent="MouseEnter">
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation To="#2980B9" 
                                                    Duration="0:0:0.2" 
                                                    Storyboard.TargetProperty="Background.Color"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                        <EventTrigger RoutedEvent="MouseLeave">
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation To="#3498DB" 
                                                    Duration="0:0:0.2" 
                                                    Storyboard.TargetProperty="Background.Color"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Button.Triggers>
                </Button>

                <Button x:Name="ProfileButton" 
                        Content="👤 Личный кабинет" 
                        Background="#1ABC9C"
                        Foreground="White"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Height="35"
                        Padding="15,0"
                        Margin="0,0,10,0"
                        BorderBrush="Transparent"
                        BorderThickness="0"
                        Cursor="Hand"
                        Click="ProfileButton_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border CornerRadius="5" 
                                    Background="{TemplateBinding Background}">
                                <ContentPresenter HorizontalAlignment="Center" 
                                                  VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                    <Button.Triggers>
                        <EventTrigger RoutedEvent="MouseEnter">
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation To="#16A085" 
                                                    Duration="0:0:0.2" 
                                                    Storyboard.TargetProperty="Background.Color"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                        <EventTrigger RoutedEvent="MouseLeave">
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation To="#1ABC9C" 
                                                    Duration="0:0:0.2" 
                                                    Storyboard.TargetProperty="Background.Color"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Button.Triggers>
                </Button>

                <Button x:Name="RefreshButton" 
                        Content="🔄 Обновить" 
                        Background="#95A5A6"
                        Foreground="White"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Height="35"
                        Padding="15,0"
                        Margin="0,0,10,0"
                        BorderBrush="Transparent"
                        BorderThickness="0"
                        Cursor="Hand"
                        Click="RefreshButton_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border CornerRadius="5" 
                                    Background="{TemplateBinding Background}">
                                <ContentPresenter HorizontalAlignment="Center" 
                                                  VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <Button x:Name="LogoutButton" 
                        Content="🚪 Выход" 
                        Background="#E74C3C"
                        Foreground="White"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Height="35"
                        Padding="15,0"
                        BorderBrush="Transparent"
                        BorderThickness="0"
                        Cursor="Hand"
                        Click="LogoutButton_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border CornerRadius="5" 
                                    Background="{TemplateBinding Background}">
                                <ContentPresenter HorizontalAlignment="Center" 
                                                  VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

            </StackPanel>
        </Border>

        <!-- Информация о сотруднике -->
        <Border Grid.Row="1" Background="#0078D7" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock x:Name="WelcomeText" 
                               Text="Загрузка..." 
                               Foreground="White" 
                               FontSize="22" 
                               FontWeight="Bold"/>
                </StackPanel>

                <TextBlock Grid.Column="1" 
                           Text="📞 Управление заявками" 
                           Foreground="White" 
                           FontSize="16"
                           FontWeight="SemiBold"
                           VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- Список заявок -->
        <Border Grid.Row="1" Margin="20" CornerRadius="10" Background="White">
            <DataGrid x:Name="CallsDataGrid"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      HeadersVisibility="Column"
                      SelectionMode="Single"
                      BorderBrush="Transparent"
                      Background="White">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Дата и время" 
                                        Binding="{Binding CallDatetime, StringFormat=dd.MM.yyyy HH:mm}"
                                        Width="150"/>
                    <DataGridTextColumn Header="Длительность (мин)" 
                                        Binding="{Binding Duration}"
                                        Width="120"/>
                    <DataGridTextColumn Header="Результат" 
                                        Binding="{Binding Result}"
                                        Width="150"/>
                    <DataGridTextColumn Header="Комментарий" 
                                        Binding="{Binding Comment}"
                                        Width="250"/>
                    <DataGridTextColumn Header="Клиент" 
                                        Binding="{Binding Client.FullName}"
                                        Width="200"/>
                    <DataGridTextColumn Header="Услуги" 
                                        Binding="{Binding ServicesList}"
                                        Width="250"/>
                </DataGrid.Columns>

                <DataGrid.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Padding" Value="10"/>
                        <Setter Property="Foreground" Value="#333333"/>
                    </Style>
                </DataGrid.CellStyle>

                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="#0078D7"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Padding" Value="10"/>
                        <Setter Property="BorderThickness" Value="0"/>
                    </Style>
                </DataGrid.ColumnHeaderStyle>

                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="BorderBrush" Value="#E0E0E0"/>
                        <Setter Property="BorderThickness" Value="0,0,0,1"/>
                    </Style>
                </DataGrid.RowStyle>
            </DataGrid>
        </Border>

        <!-- Статус -->
        <Border Grid.Row="2" 
                Background="White" 
                Padding="15"
                BorderBrush="#E0E0E0" 
                BorderThickness="0,1,0,0">
            <TextBlock x:Name="StatusText" 
                       Text="Загрузка заявок..." 
                       Foreground="#666666"
                       HorizontalAlignment="Center"/>
        </Border>
    </Grid>
</Window>
